<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet">
  <title>Map For Reddit</title>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.0.2/css/bootstrap-slider.css"></link>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.0.2/bootstrap-slider.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="{{url_for('static', filename='style.css')}}">
  <script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js">
  </script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
  </script>
</head>
<body>
  <div class="row" style="position: relative;">
    <div id="userform" class="sidenav" style="visibility: unset;">
      <div id="title">
        <h1>Map for</h1>
        <h1>Reddit</h1>
      </div>
      <form method="POST">
        <div id="accordion">
          <div class="selection">
            <button data-toggle="collapse" type="button" class="accordion">Countries</button>
            <div class="panel">
              <select id="countries" name="reddit_countries" class="form-control" size="200" style="height: 100px;" multiple>
                <option value='0'>Afghanistan</option>
                <option value='1'>Albania</option>
                <option value='2'>Algeria</option>
                <option value='3'>Angola</option>
                <option value='4'>Anguilla</option>
                <option value='5'>Antigua and Barbuda</option>
                <option value='6'>Argentina</option>
                <option value='7'>Armenia</option>
                <option value='8'>Australia</option>
                <option value='9'>Austria</option>
                <option value='10'>Azerbaijan</option>
                <option value='11'>B&H</option>
                <option value='12'>Bahrain</option>
                <option value='13'>Bangladesh</option>
                <option value='14'>Barbados</option>
                <option value='15'>Belarus</option>
                <option value='16'>Belgium</option>
                <option value='17'>Belize</option>
                <option value='18'>Bermuda</option>
                <option value='19'>Bhutan</option>
                <option value='20'>Bolivia</option>
                <option value='21'>Botswana</option>
                <option value='22'>Brazil</option>
                <option value='23'>Brunei</option>
                <option value='24'>Bulgaria</option>
                <option value='25'>Burkina Faso</option>
                <option value='26'>Burundi</option>
                <option value='27'>Cambodia</option>
                <option value='28'>Cameroon</option>
                <option value='29'>Canada</option>
                <option value='30'>Cape Verde</option>
                <option value='31'>Cayman Islands</option>
                <option value='32'>Chile</option>
                <option value='33'>Colombia</option>
                <option value='34'>Comoros</option>
                <option value='35'>Congo-Brazzaville</option>
                <option value='36'>Corn Islands</option>
                <option value='37'>Costa Rica</option>
                <option value='38'>Croatia</option>
                <option value='39'>Cuba</option>
                <option value='40'>Cyprus</option>
                <option value='41'>Czechia</option>
                <option value='42'>D.R.</option>
                <option value='43'>DR Congo</option>
                <option value='44'>Denmark</option>
                <option value='45'>Djibouti</option>
                <option value='46'>Dominica</option>
                <option value='47'>Egypt</option>
                <option value='48'>El Salvador</option>
                <option value='49'>Equatorial Guinea</option>
                <option value='50'>Eritrea</option>
                <option value='51'>Estonia</option>
                <option value='52'>Ethiopia</option>
                <option value='53'>Falkland Islands</option>
                <option value='54'>Fiji</option>
                <option value='55'>Finland</option>
                <option value='56'>France</option>
                <option value='57'>France, Polynésie française (eaux territoriales)</option>
                <option value='58'>France, Terres australes et antarctiques françaises, Îles Kerguelen (eaux territoriales)</option>
                <option value='59'>France, Terres australes et antarctiques françaises, Îles Saint-Paul et Nouvelle-Amsterdam - Île Saint-Paul (eaux territoriales)</option>
                <option value='60'>France, Wallis-et-Futuna (eaux territoriales)</option>
                <option value='61'>Francis Joseph's Land</option>
                <option value='62'>Gabon</option>
                <option value='63'>Georgia</option>
                <option value='64'>Germany</option>
                <option value='65'>Ghana</option>
                <option value='66'>Gibraltar</option>
                <option value='67'>Greece</option>
                <option value='68'>Grenada</option>
                <option value='69'>Guatemala</option>
                <option value='70'>Guyana</option>
                <option value='71'>Haiti</option>
                <option value='72'>Honduras</option>
                <option value='73'>Hungary</option>
                <option value='74'>Iceland</option>
                <option value='75'>India</option>
                <option value='76'>Indonesia</option>
                <option value='77'>Iran</option>
                <option value='78'>Iraq</option>
                <option value='79'>Ireland</option>
                <option value='80'>Israel</option>
                <option value='81'>Italy</option>
                <option value='82'>Jamaica</option>
                <option value='83'>Japan</option>
                <option value='84'>Jordan</option>
                <option value='85'>Kazakhstan</option>
                <option value='86'>Kenya</option>
                <option value='87'>Kuwait</option>
                <option value='88'>Kyrgyzstan</option>
                <option value='89'>Laos</option>
                <option value='90'>Latvia</option>
                <option value='91'>Lebanon</option>
                <option value='92'>Lesotho</option>
                <option value='93'>Liberia</option>
                <option value='94'>Libya</option>
                <option value='95'>Lithuania</option>
                <option value='96'>Luxembourg</option>
                <option value='97'>Macedonia</option>
                <option value='98'>Madagascar</option>
                <option value='99'>Malawi</option>
                <option value='100'>Malaysia</option>
                <option value='101'>Maldives</option>
                <option value='102'>Mali</option>
                <option value='103'>Malta</option>
                <option value='104'>Mauritania</option>
                <option value='105'>Mauritius</option>
                <option value='106'>Metropolitan France</option>
                <option value='107'>Mexico</option>
                <option value='108'>Moldova</option>
                <option value='109'>Mongolia</option>
                <option value='110'>Montserrat</option>
                <option value='111'>Morocco</option>
                <option value='112'>Mozambique</option>
                <option value='113'>Myanmar</option>
                <option value='114'>Namibia</option>
                <option value='115'>Nepal</option>
                <option value='116'>New Zealand</option>
                <option value='117'>Nicaragua</option>
                <option value='118'>Nigeria</option>
                <option value='119'>North Korea</option>
                <option value='120'>Norway</option>
                <option value='121'>Nouvelle-Calédonie, France, Îles Loyauté (eaux territoriales)</option>
                <option value='122'>Oman</option>
                <option value='123'>PRC</option>
                <option value='124'>Pakistan</option>
                <option value='125'>Panama</option>
                <option value='126'>Papua New Guinea</option>
                <option value='127'>Paraguay</option>
                <option value='128'>Peru</option>
                <option value='129'>Philippines</option>
                <option value='130'>Poland</option>
                <option value='131'>Portugal</option>
                <option value='132'>Qatar</option>
                <option value='133'>ROC</option>
                <option value='134'>RSA</option>
                <option value='135'>Romania</option>
                <option value='136'>Russia</option>
                <option value='137'>Rwanda</option>
                <option value='138'>SBA</option>
                <option value='139'>Saint Helena, Ascension and Tristan da Cunha</option>
                <option value='140'>Saint Kitts and Nevis</option>
                <option value='141'>Saint Lucia</option>
                <option value='142'>Saint Vincent and the Grenadines</option>
                <option value='143'>Samoa</option>
                <option value='144'>Saudi Arabia</option>
                <option value='145'>Senegal</option>
                <option value='146'>Serbia</option>
                <option value='147'>Seychelles</option>
                <option value='148'>Sierra Leone</option>
                <option value='149'>Singapore</option>
                <option value='150'>Slovakia</option>
                <option value='151'>Slovenia</option>
                <option value='152'>Solomon Islands</option>
                <option value='153'>Somalia</option>
                <option value='154'>South Korea</option>
                <option value='155'>South Sudan</option>
                <option value='156'>Spain</option>
                <option value='157'>Spain (territorial waters)</option>
                <option value='158'>Sri Lanka</option>
                <option value='159'>Sudan</option>
                <option value='160'>Suriname</option>
                <option value='161'>Sweden</option>
                <option value='162'>Switzerland</option>
                <option value='163'>Syria</option>
                <option value='164'>São Tomé and Príncipe</option>
                <option value='165'>Tajikistan</option>
                <option value='166'>Tanzania</option>
                <option value='167'>Territorial waters of Bornholm</option>
                <option value='168'>Territorial waters of Greece - Gavdos and Gavdopoula</option>
                <option value='169'>Territorial waters of Italy - Ustica</option>
                <option value='170'>Thailand</option>
                <option value='171'>The Bahamas</option>
                <option value='172'>The Netherlands</option>
                <option value='173'>Tonga</option>
                <option value='174'>Trinidad and Tobago</option>
                <option value='175'>Tunisia</option>
                <option value='176'>Turkey</option>
                <option value='177'>Turkmenistan</option>
                <option value='178'>USA</option>
                <option value='179'>Uganda</option>
                <option value='180'>Ukraine</option>
                <option value='181'>United Arab Emirates</option>
                <option value='182'>United Kingdom</option>
                <option value='183'>United States of America</option>
                <option value='184'>United States of America (American Samoa)</option>
                <option value='185'>United States of America (CNMI)</option>
                <option value='186'>United States of America (Dry Tortugas territorial waters)</option>
                <option value='187'>United States of America (Guam)</option>
                <option value='188'>United States of America (Island of Hawai'i territorial waters)</option>
                <option value='189'>United States of America (Kaua'i, Ni'ihau, Ka'ula)</option>
                <option value='190'>United States of America (Middle Hawai'ian Islands territorial waters)</option>
                <option value='191'>United States of America (USVI Saint Croix)</option>
                <option value='192'>Uruguay</option>
                <option value='193'>Uzbekistan</option>
                <option value='194'>Vanuatu</option>
                <option value='195'>Venezuela</option>
                <option value='196'>Vietnam</option>
                <option value='197'>Yemen</option>
                <option value='198'>Zambia</option>
              </select>
            </div>
          </div>
          <div class="selection">
            <button data-toggle="collapse" type="button" class="accordion">Score</button>
            <div class="panel">
              <input id="score" name="reddit_score" type="text" class="span2" value="" data-slider-min="10" data-slider-max="155000" data-slider-step="1" data-slider-value="[10,155000]" data-slider-tooltip="show"/>
            </div>
          </div>
          <div class="selection">
            <button data-toggle="collapse" type="button" class="accordion">Comments</button>
            <div class="panel">
              <input id="comments" name="reddit_comments" type="text" class="span2" value="" data-slider-min="0" data-slider-max="10000" data-slider-step="5" data-slider-value="[0,10000]" data-slider-tooltip="show"/>
            </div>
          </div>
          <div class="selection">
            <button data-toggle="collapse" type="button" class="accordion">Cluster</button>
            <div class="panel">
              <input id="cluster" name="reddit_cluster" data-slider-id='clusterSlider' type="text" data-slider-min="0" data-slider-max="10" data-slider-step="1" data-slider-value="0" data-slider-tooltip="show"/>
            </div>
          </div>
          <div class="selection">
            <button data-toggle="collapse" type="button" class="accordion">Number of Results</button>
            <div class="panel">
              <input id="results" name="reddit_results" data-slider-id='resultsSlider' type="text" data-slider-min="1" data-slider-max="5000" data-slider-step="1" data-slider-value="5000" data-slider-tooltip="show"/>
            </div>
          </div>
          <div class="selection">
            <button data-toggle="collapse" type="button" class="accordion">Minimum per Country</button>
            <div class="panel">
              <input id="country" name="reddit_country" data-slider-id='countrySlider' type="text" data-slider-min="0" data-slider-max="20" data-slider-step="1" data-slider-value="10" data-slider-tooltip="show"/>
            </div>
          </div>
          <div class="selection">
            <button data-toggle="collapse" type="button" class="accordion">Date Range</button>
            <div class="panel">
              <input type="text" name="daterange" value="01/01/2012 - 01/01/2017" />
              <div id="reportrange" name="report_range" type="text" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc; width: 100%">
                  <i class="fa fa-calendar"></i>&nbsp;
                  <span></span> <i class="fa fa-caret-down"></i>
              </div>
            </div>
          </div>
          <div class="selection">
            <button data-toggle="collapse" type="button" class="accordion">Advanced</button>
            <div class="panel">
            </div>
          </div>
            <div style="margin-left: 65%; margin-top: 10%;">
              <button type="submit" class="btn btn-primary">Submit</button>
          </div>
        </div>
      </form>
    </div>
    <div class="openclose" id="openclose">
      <p id="rightArrow" onclick="closeNav()"><i class="arrow right"></i></p>
      <p id="leftArrow" onclick="closeNav()"><i class="arrow left"></i></p>
      <!-- <span onclick="darkModeOn()">black</span> -->
    </div>
    <div id="mapbox">
      <div id="map"></div>
      <!-- <a data-toggle='modal' data-target='#exampleModal' style='text-decoration: underline; color: black; float: right;' target='_blank'> More </a> -->
    </div>
  </div>
  <div class="modal fade" id="reportModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content" id="modalcontentreport">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalCenterTitle">Report</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <form method="POST">
          <div class="modal-body">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="delete_post" id="owner" value="option1">
              <label class="form-check-label" for="exampleRadios1">
                This is your image and you want it removed
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="delete_post" id="location" value="option1">
              <label class="form-check-label" for="exampleRadios1">
                This image is in the wrong location
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="delete_post" id="broken" value="option1">
              <label class="form-check-label" for="exampleRadios1">
                The image link is broken
              </label>
            </div>
          </div>
          <!-- //data-dismiss="modal" -->
          <div class="modal-footer">
            <button type="submit" class="btn btn-secondary">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="padding-left: 0px; height: 95%;">
    <div class="modal-dialog" role="document">
      <div class="modal-content" style="background-color: #f7f7f7">
        <div style="background-color: #cee3f8;">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style="padding: 0 0 0 0px;">
          <div class="row">
            <div class="col-lg-12" style="background-color: #cee3f8; border-bottom: solid #5f99cf 1px;">
              <div style="display: inline-block; height: 95px; width: 150px;">
                <a style="font-size: 34px;" target="_blank" href="https://www.reddit.com/r/earthporn"> Map for Reddit </a>
              </div>
              <ul id="ultoptabs">
                <li class="toptabs" id="toptabsLocation" ><a id="toptabsLocationLink" class="toptabslink" onclick="locationSelected()">Location</a></li>
                <li class="toptabs" id="toptabsUser" ><a id="toptabsUserLink" class="toptabslink" onclick="userSelected()">User</a></li>
              </ul>
            </div>
          </div>
            <div class="row">
              <div id="redditUser" class="col-lg-6" style="display: block;">
                <h3 id="modalRedditUser" style="margin-top: 30px;"></h3>
                <div class="">
                  <div id="piechart"></div>
                </div>
              <div>
                <div class="row">
                  <div class="col-lg-3" class="modalMiniImageColumn" id="modalmini1">
                    <div style="height: 130px;">
                      <img class="modalMiniImage" id="modalMiniImage1" src="">
                    </div>
                    <div>
                      <ul>
                        <li id="modalMiniImageSub1" class="modalMiniImageSub"> <a id="modalMiniLinkSub1" class="embedlink" target="_blank" href=""> </a></li>
                        <li id="modalMiniImageUser1" class="modalMiniImageUser"> <a id="modalMiniLinkUser1" class="embedlink" target="_blank" href=""> </a></li>
                      </ul>
                    </div>
                    <div class="modalBottomImbed">
                      <ul>
                        <li id="modalMiniImageScore1" class="modalMiniImageScore"> <a id="modalMiniLinkScore1" class="embedlink" target="_blank" href=""> </a></li>
                        <li id="modalMiniImageComments1" class="modalMiniImageComments"> <a id="modalMiniLinkComments1" class="embedlink" target="_blank" href=""> </a></li>
                      </ul>
                    </div>
                  </div>
                  <div class="col-lg-3" class="modalMiniImageColumn" id="modalmini2">
                    <div style="height: 130px;">
                      <img class="modalMiniImage" id="modalMiniImage2" src="">
                    </div>
                    <div>
                      <ul>
                        <li id="modalMiniImageSub2" class="modalMiniImageSub"> <a id="modalMiniLinkSub2" class="embedlink" target="_blank" href=""> </a></li>
                        <li id="modalMiniImageUser2" class="modalMiniImageUser"> <a id="modalMiniLinkUser2" class="embedlink" target="_blank" href=""> </a></li>
                      </ul>
                    </div>
                    <div class="modalBottomImbed">
                      <ul>
                        <li id="modalMiniImageScore2" class="modalMiniImageScore"> <a id="modalMiniLinkScore2" class="embedlink" target="_blank" href=""> </a></li>
                        <li id="modalMiniImageComments2" class="modalMiniImageComments"> <a id="modalMiniLinkComments2" class="embedlink" target="_blank" href=""> </a></li>
                      </ul>
                    </div>
                  </div>
                  <div class="col-lg-3" class="modalMiniImageColumn" id="modalmini3">
                    <div style="height: 130px;">
                      <img class="modalMiniImage" id="modalMiniImage3" src="">
                    </div>
                    <div>
                      <ul style="">
                        <li id="modalMiniImageSub3" class="modalMiniImageSub"> <a id="modalMiniLinkSub3" class="embedlink" target="_blank" href=""> </a></li>
                        <li id="modalMiniImageUser3" class="modalMiniImageUser"> <a id="modalMiniLinkUser3" class="embedlink" target="_blank" href=""> </a></li>
                      </ul>
                    </div>
                    <div class="modalBottomImbed">
                      <ul>
                        <li id="modalMiniImageScore3" class="modalMiniImageScore"> <a id="modalMiniLinkScore3" class="embedlink" target="_blank" href=""> </a></li>
                        <li id="modalMiniImageComments3" class="modalMiniImageComments"> <a id="modalMiniLinkComments3" class="embedlink" target="_blank" href=""> </a></li>
                      </ul>
                    </div>
                  </div>
                  <div style="margin-top: auto; margin-bottom: auto; margin-left: 80px;" id="modalmini4">
                    <p><i class="arrow right"></i></p>
                  </div>
                </div>
              </div>
            </div>
            <div id="locationInfo" style="display: none; margin-top: 1%; width: 100%; margin-left: 1%;">
              <div class="">
                <h4 style="font-size: 30px; margin-top: 2%;" id="placeName"></h4>
              </div>
              <div style="height: 20%; margin-top: 3%;" class="row">
                <div style="text-align: center;" class="col-lg-4">
                  <div>
                    <h4 id="weatherTemp" style="font-size: 50px; padding-top: 28px;"></h4>
                    <h4 id="weatherDesc" style="font-size: 25px; margin-top: -15px;"></h4>
                  </div>
                </div>
                <div class="col-lg-4">
                  <h4 id="toCurrency" style="font-size: 50px; text-align: center;"></h4>
                  <h4 style="font-size: 50px; text-align: center; margin-bottom: -20px; margin-top: -30px;">=</h4>
                  <h4 id="fromCurrency" style="font-size: 50px; text-align: center;"></h4>
                </div>
                <div class="col-lg-4">
                  <h4 style="font-size: 50px; text-align: center; margin-top: 28px;" id="localTime"><h4>
                  <h4 style="text-align: center; margin-top: -20px; font-size: 25px;">Local Time</h4>
                </div>
              </div>
              <!-- <div style="margin-top: 2%; font-size: 24px;">
                <h4>Closest Wikipedia Article</h4>
              </div> -->
              <div style="margin-top: 3%; font-size: 36px;">
                <h1 id="wiki_title"></h1>
              </div>
              <div class="" style="padding-top: 20px;">
                <h5 style="font-size: 16px;" id="wiki_extract"><h5>
                <a id="wikipedia" href='' target="_blank">Wikipedia</a>
              </div>
            </div>
            <div style="overflow: auto; max-height: 100%; padding-bottom: 1%;" class="col-lg-6">
              <div>
                <div>
                  <h4 id="modalImageTitle"><a id="modalImageTitleLink" class="embedlink" target="_blank" href=""></a></h4>
                </div>
                <div>
                  <img id="modalImageImage" src="">
                </div>
                <div style="margin-left: -35px;">
                  <ul style="">
                    <li id="modalImageSub"> <a id="modalImageSubLink" class="embedlink" target="_blank" href=""> </a></li>
                    <li class="embedLi" id="modalImageUser"> <a id="modalImageUserLink" class="embedInfo" target="_blank" href=""> </a></li>
                  </ul>
                </div>
                <div style="margin-left: -35px;" class="modalBottomImbed">
                  <ul>
                    <li class="embedLi" id="modalImageScore"> <a id="modalImageScoreLink" class="embedInfo" target="_blank" href=""> </a></li>
                    <li class="embedLi" id="modalImageComments"> <a id="modalImageCommentsLink" class="embedInfo" target="_blank" href=""> </a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript">

  document.getElementById("rightArrow").style.display = "none";

  var geojson = {{ geojson | safe}};

  function initMap() {

      var infowindow = new google.maps.InfoWindow();

      var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 3,
          center: new google.maps.LatLng(-28, 137),
        //   styles: [
        //     {elementType: "geometry", stylers: [{color: "#212121"}]},
        //     {elementType: "labels.icon", stylers: [{visibility: "off"}]},
        //     {elementType: "labels.text.fill", stylers: [{color: "#757575"}]},
        //     {elementType: "labels.text.stroke", stylers: [{color: "#212121"}]},
        //     {
        //       featureType: "administrative",
        //       elementType: "geometry",
        //       stylers: [{color: "#757575"}]
        //     },
        //     {
        //       featureType: "administrative.country",
        //       elementType: "labels.text.fill",
        //       stylers: [{color: "#9e9e9e"}]},
        //     {
        //       featureType: "administrative.land_parcel",
        //       stylers: [{visibility: "off"}]},
        //     {
        //       featureType: "administrative.locality",
        //       elementType: "labels.text.fill",
        //       stylers: [{color: "#bdbdbd"}]},
        //     {
        //       featureType: "poi",
        //       elementType: "labels.text.fill",
        //       stylers: [{color: "#757575"}]},
        //     {
        //       featureType: "poi.park",
        //       elementType: "geometry",
        //       stylers: [{color: "#181818"}]},
        //     {
        //       featureType: "poi.park",
        //       elementType: "labels.text.fill",
        //       stylers: [{color: "#616161"}]},
        //     {
        //       featureType: "poi.park",
        //       elementType: "labels.text.stroke",
        //       stylers: [{color: "#1b1b1b"}]},
        //     {
        //       featureType: "road",
        //       elementType: "geometry.fill",
        //       stylers: [{color: "#2c2c2c"}]},
        //     {
        //       featureType: "road",
        //       elementType: "labels.text.fill",
        //       stylers: [{color: "#8a8a8a"}]},
        //     {
        //       featureType: "road.arterial",
        //       elementType: "geometry",
        //       stylers: [{color: "#373737"}]},
        //     {
        //       featureType: "road.highway",
        //       elementType: "geometry",
        //       stylers: [{color: "#3c3c3c"}]},
        //     {
        //       featureType: "road.highway.controlled_access",
        //       elementType: "geometry",
        //       stylers: [{color: "#4e4e4e"}]},
        //     {
        //       featureType: "road.local",
        //       elementType: "labels.text.fill",
        //       stylers: [{color: "#616161"}]},
        //     {
        //       featureType: "transit",
        //       elementType: "labels.text.fill",
        //       stylers: [{color: "#757575"}]},
        //     {
        //       featureType: "water",
        //       elementType: "geometry",
        //       stylers: [{color: "#000000"}]},
        //     {
        //       featureType: "water",
        //       elementType: "labels.text.fill",
        //       stylers: [{color: "#3d3d3d"}]}
        //     }]
        });

      var markerCluster = new MarkerClusterer(map, markers, {
        imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'
      });

      function placeMarker( loc ) {
        var latLng = new google.maps.LatLng( loc['geometry']['coordinates'][1], loc['geometry']['coordinates'][0]);
        var marker = new google.maps.Marker({
          position : latLng,
          map      : map
        });
        markerCluster.addMarker(marker);
        google.maps.event.addListener(marker, 'click', function(){
            infowindow.close();
            infowindow.setContent("<div class='infowindow_body' style='box-sizing: border-box; color: black;'>" +
                                  "<p><a style='text-decoration:none; color: black;' href='https://www.reddit.com/r/earthporn/" + loc['id'] + "'><div style='text-align: center; font-weight: bold; font-size: 16px;'>"  +
                                  loc['properties']['title'] + "</p></div></a> <div style='float:center'><img src='" + loc['properties']['image_link'] + "' style='max-width: 250px;'></div>" +
                                  "<div style='margin-top: 8px;'><p><a style='text-decoration:none; color: black; position: relative;' target='_blank' href='https://www.reddit.com/r/earthporn'> r/EarthPorn </a>" +
                                  "<a style='text-decoration:none; color: black; float: right;' target='_blank' href='https://www.reddit.com/u/" + loc['properties']['username'] + "'>" + loc['properties']['username'] + "</a></p></div>" +
                                  "<div style='margin-top: -10px;'><p><a style='text-decoration:none; color: black;' target='_blank' id='postScore' href='https://www.reddit.com/r/earthporn/" + loc['id'] + "'>" +
                                  loc['properties']['score'] + " points" + "</a><a style='text-decoration:none; color: black; float: right;' target='_blank' href='https://www.reddit.com/r/earthporn/" + loc['id'] + "'>" + loc['properties']['comments'] + " comments" + "</a></p></div></div>" +
                                  "<div style='margin-top: -10px; '><p><a data-toggle='modal' data-target='#reportModal' style='text-decoration: underline; color: black; float: left;' target='_blank'> Report </a><a data-toggle='modal' data-target='#exampleModal' onclick='locationSelected(), getPieChart(), getWikiExtract(), getRedditUser()'' style='text-decoration: underline; color: black; float: right;' target='_blank'> More </a></p></div>"
                                );

            infowindow.setOptions({maxWidth:250});
            infowindow.open(map, marker);
        });
        return marker
      }

      for(var i=0; i<geojson["features"].length; i++) {
        var markers = placeMarker(geojson["features"][i]);
      }
    }

    </script>
    <script src="{{url_for('static', filename='script.js')}}"></script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCR6ne9XG6KkXA9TSTQEmdQApCl5m9rMjs&callback=initMap">
    </script>
    <!-- <div>
        <div id="map"></div>
    </div> -->
</body>
</html>
