<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet">
  <title>Map For Reddit</title>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.0.2/css/bootstrap-slider.css"></link>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.0.2/bootstrap-slider.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.9/font/weathericons-regular-webfont.eot"></link>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.9/font/weathericons-regular-webfont.svg"></link>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.9/font/weathericons-regular-webfont.ttf"></link>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.9/font/weathericons-regular-webfont.woff"></link>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.9/font/weathericons-regular-webfont.woff2"></link>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.9/css/weather-icons-wind.min.css"></link>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="{{url_for('static', filename='style1.css')}}">
  <script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js">
  </script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
  </script>
</head>
<body>
  <div class="row" style="position: relative;">
    <div id="userform" class="sidenav" style="visibility: unset;">
      <div id="title">
        <h1>Map for</h1>
        <h1>Reddit</h1>
      </div>
      <form method="POST">
        <div id="accordion">
          <div class="selection">
            <button data-toggle="collapse" type="button" class="accordion">Countries</button>
            <div class="panel">
              <select class="custom-select" size="4" multiple>
                <option selected>Open this select menu</option>
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
              </select>
            </div>
          </div>
          <div class="selection">
            <button data-toggle="collapse" type="button" class="accordion">Score</button>
            <div class="panel">
              <input id="score" name="reddit_score" type="text" class="span2" value="" data-slider-min="10" data-slider-max="155000" data-slider-step="1" data-slider-value="[10,155000]" data-slider-tooltip="show"/>
            </div>
          </div>
          <div class="selection">
            <button data-toggle="collapse" type="button" class="accordion">Comments</button>
            <div class="panel">
              <input id="comments" name="reddit_comments" type="text" class="span2" value="" data-slider-min="0" data-slider-max="10000" data-slider-step="5" data-slider-value="[0,10000]" data-slider-tooltip="show"/>
            </div>
          </div>
          <div class="selection">
            <button data-toggle="collapse" type="button" class="accordion">Cluster</button>
            <div class="panel">
              <input id="cluster" name="reddit_cluster" data-slider-id='clusterSlider' type="text" data-slider-min="0" data-slider-max="10" data-slider-step="1" data-slider-value="0" data-slider-tooltip="show"/>
            </div>
          </div>
          <div class="selection">
            <button data-toggle="collapse" type="button" class="accordion">Number of Results</button>
            <div class="panel">
              <input id="results" name="reddit_results" data-slider-id='resultsSlider' type="text" data-slider-min="1" data-slider-max="5000" data-slider-step="1" data-slider-value="5000" data-slider-tooltip="show"/>
            </div>
          </div>
          <div class="selection">
            <button data-toggle="collapse" type="button" class="accordion">Minimum per Country</button>
            <div class="panel">
              <input id="country" name="reddit_country" data-slider-id='countrySlider' type="text" data-slider-min="0" data-slider-max="20" data-slider-step="1" data-slider-value="10" data-slider-tooltip="show"/>
            </div>
          </div>
          <div class="selection">
            <button data-toggle="collapse" type="button" class="accordion">Date Range</button>
            <div class="panel">
              <input type="text" name="daterange" value="01/01/2012 - 01/01/2017" />
              <div id="reportrange" name="report_range" type="text" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc; width: 100%">
                  <i class="fa fa-calendar"></i>&nbsp;
                  <span></span> <i class="fa fa-caret-down"></i>
              </div>
            </div>
          </div>
          <div class="selection">
            <button data-toggle="collapse" type="button" class="accordion">Advanced</button>
            <div class="panel">
            </div>
          </div>
            <div style="margin-left: 65%; margin-top: 10%;">
              <button type="submit" class="btn btn-primary">Submit</button>
          </div>
        </div>
      </form>
    </div>
    <div class="openclose" id="openclose">
      <p id="rightArrow" onclick="closeNav()"><i class="arrow right"></i></p>
      <p id="leftArrow" onclick="closeNav()"><i class="arrow left"></i></p>
      <!-- <span onclick="darkModeOn()">black</span> -->
    </div>
    <div id="mapbox">
      <div id="map"></div>
      <!-- <a data-toggle='modal' data-target='#exampleModal' style='text-decoration: underline; color: black; float: right;' target='_blank'> More </a> -->
    </div>
  </div>
  <div class="modal fade" id="reportModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content" id="modalcontentreport">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalCenterTitle">Report</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <form method="POST">
          <div class="modal-body">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="delete_post" id="owner" value="option1">
              <label class="form-check-label" for="exampleRadios1">
                This is your image and you want it removed
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="delete_post" id="location" value="option1">
              <label class="form-check-label" for="exampleRadios1">
                This image is in the wrong location
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="delete_post" id="broken" value="option1">
              <label class="form-check-label" for="exampleRadios1">
                The image link is broken
              </label>
            </div>
          </div>
          <!-- //data-dismiss="modal" -->
          <div class="modal-footer">
            <button type="submit" class="btn btn-secondary">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="padding-left: 0px; height: 95%; overflow-y: hidden;">
    <div class="modal-dialog" role="document">
      <div class="modal-content" style="background-color: #f7f7f7">
        <div style="background-color: #cee3f8;">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style="padding: 0 0 0 0px;">
          <div class="row">
            <div class="col-lg-12" style="background-color: #cee3f8; border-bottom: solid #5f99cf 1px;">
              <div style="display: inline-block; height: 95px; width: 150px;">
                <a style="font-size: 34px;" target="_blank" href="https://www.reddit.com/r/earthporn"> Map for Reddit </a>
              </div>
              <ul id="ultoptabs">
                <li class="toptabs" id="toptabsLocation" ><a id="toptabsLocationLink" class="toptabslink" onclick="locationSelected()">Location</a></li>
                <li class="toptabs" id="toptabsUser" ><a id="toptabsUserLink" class="toptabslink" onclick="userSelected()">User</a></li>
              </ul>
            </div>
          </div>
            <div class="row" style="height: 950px;">
              <div id="redditUser" class="col-lg-6" style="display: block;">
                <h3 id="modalRedditUser" style="margin-top: 30px;"></h3>
                <div class="">
                  <div id="piechart"></div>
                </div>
              <div>
                <div class="row">
                  <div class="col-lg-3" class="modalMiniImageColumn" id="modalmini1">
                    <div style="height: 130px;">
                      <img class="modalMiniImage" id="modalMiniImage1" src="">
                    </div>
                    <div>
                      <ul>
                        <li id="modalMiniImageSub1" class="modalMiniImageSub"> <a id="modalMiniLinkSub1" class="embedlink" target="_blank" href=""> </a></li>
                        <li id="modalMiniImageUser1" class="modalMiniImageUser"> <a id="modalMiniLinkUser1" class="embedlink" target="_blank" href=""> </a></li>
                      </ul>
                    </div>
                    <div class="modalBottomImbed">
                      <ul>
                        <li id="modalMiniImageScore1" class="modalMiniImageScore"> <a id="modalMiniLinkScore1" class="embedlink" target="_blank" href=""> </a></li>
                        <li id="modalMiniImageComments1" class="modalMiniImageComments"> <a id="modalMiniLinkComments1" class="embedlink" target="_blank" href=""> </a></li>
                      </ul>
                    </div>
                  </div>
                  <div class="col-lg-3" class="modalMiniImageColumn" id="modalmini2">
                    <div style="height: 130px;">
                      <img class="modalMiniImage" id="modalMiniImage2" src="">
                    </div>
                    <div>
                      <ul>
                        <li id="modalMiniImageSub2" class="modalMiniImageSub"> <a id="modalMiniLinkSub2" class="embedlink" target="_blank" href=""> </a></li>
                        <li id="modalMiniImageUser2" class="modalMiniImageUser"> <a id="modalMiniLinkUser2" class="embedlink" target="_blank" href=""> </a></li>
                      </ul>
                    </div>
                    <div class="modalBottomImbed">
                      <ul>
                        <li id="modalMiniImageScore2" class="modalMiniImageScore"> <a id="modalMiniLinkScore2" class="embedlink" target="_blank" href=""> </a></li>
                        <li id="modalMiniImageComments2" class="modalMiniImageComments"> <a id="modalMiniLinkComments2" class="embedlink" target="_blank" href=""> </a></li>
                      </ul>
                    </div>
                  </div>
                  <div class="col-lg-3" class="modalMiniImageColumn" id="modalmini3">
                    <div style="height: 130px;">
                      <img class="modalMiniImage" id="modalMiniImage3" src="">
                    </div>
                    <div>
                      <ul style="">
                        <li id="modalMiniImageSub3" class="modalMiniImageSub"> <a id="modalMiniLinkSub3" class="embedlink" target="_blank" href=""> </a></li>
                        <li id="modalMiniImageUser3" class="modalMiniImageUser"> <a id="modalMiniLinkUser3" class="embedlink" target="_blank" href=""> </a></li>
                      </ul>
                    </div>
                    <div class="modalBottomImbed">
                      <ul>
                        <li id="modalMiniImageScore3" class="modalMiniImageScore"> <a id="modalMiniLinkScore3" class="embedlink" target="_blank" href=""> </a></li>
                        <li id="modalMiniImageComments3" class="modalMiniImageComments"> <a id="modalMiniLinkComments3" class="embedlink" target="_blank" href=""> </a></li>
                      </ul>
                    </div>
                  </div>
                  <div style="margin-top: auto; margin-bottom: auto; margin-left: 80px;" id="modalmini4">
                    <p><i class="arrow right"></i></p>
                  </div>
                </div>
              </div>
            </div>
            <div id="locationInfo" style="display: none;">
              <div>
                <h1 id="wiki_title"></h1>
              </div>
              <div class="" style="padding-top: 20px;">
                <h5 style="font-size: 16px;" id="wiki_extract"><h5>
              </div>
              <div>
                <h4 style=" margin-top: 30px; font-size: 30px;">Information</h4>
              </div>
              <div style="height: 20%;" class="row">
                <div style="text-align: center;" class="col-lg-4">
                  <div class="" style="margin-left: 45px;">
                    <img style="float: left;" src="{{url_for('static', filename='Cloud.svg')}}" alt="Cloud">
                    <h4 style="font-size: 35px; float: left; padding-top: 28px; margin-right: -30px; margin-left: -10px;">23</h4>
                    <img style="float: left;" src="{{url_for('static', filename='Degrees-Celcius.svg')}}" alt="Cloud">
                  </div>
                  <div class="">
                    <h4 style="padding-top: 100px;">Partly Cloudy</h4>
                  </div>
                </div>
                <div class="col-lg-4">
                  <h4 style="font-size: 50px; text-align: center;">&#8363;1.00</h4>
                  <h4 style="font-size: 50px; text-align: center; margin-bottom: -20px; margin-top: -30px;">=</h4>
                  <h4 style="font-size: 50px; text-align: center;">$1.00</h4>
                </div>
                <div class="col-lg-4">
                  <h4 style="font-size: 80px; text-align: center;" id="localTime"><h4>
                  <h4 style="text-align: center;">Local Time</h4>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-3">
                  <ul>
                    <li>Population: 32,000</li><
                    <li>Flight:</li>
                    <li>Accomodation:</li>
                  </ul>
                </div>
              </div>
            </div>
            <div style="overflow: auto; max-height: 100%;" class="col-lg-6">
              <div>
                <div>
                  <h4 id="modalImageTitle"><a id="modalImageTitleLink" class="embedlink" target="_blank" href=""></a></h4>
                </div>
                <div>
                  <img id="modalImageImage" src="">
                </div>
                <div>
                  <ul style="">
                    <li id="modalImageSub"> <a id="modalImageSubLink" class="embedlink" target="_blank" href=""> </a></li>
                    <li id="modalImageUser"> <a id="modalImageUserLink" class="embedlink" target="_blank" href=""> </a></li>
                  </ul>
                </div>
                <div class="modalBottomImbed">
                  <ul>
                    <li id="modalImageScore"> <a id="modalImageScoreLink" class="embedlink" target="_blank" href=""> </a></li>
                    <li id="modalImageComments"> <a id="modalImageCommentsLink" class="embedlink" target="_blank" href=""> </a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript">

  document.getElementById("rightArrow").style.display = "none";

  var geojson = {{ geojson | safe}};

  function initMap() {

      var infowindow = new google.maps.InfoWindow();

      var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 3,
          center: new google.maps.LatLng(-28, 137),
        //   styles: [
        //     {elementType: "geometry", stylers: [{color: "#212121"}]},
        //     {elementType: "labels.icon", stylers: [{visibility: "off"}]},
        //     {elementType: "labels.text.fill", stylers: [{color: "#757575"}]},
        //     {elementType: "labels.text.stroke", stylers: [{color: "#212121"}]},
        //     {
        //       featureType: "administrative",
        //       elementType: "geometry",
        //       stylers: [{color: "#757575"}]
        //     },
        //     {
        //       featureType: "administrative.country",
        //       elementType: "labels.text.fill",
        //       stylers: [{color: "#9e9e9e"}]},
        //     {
        //       featureType: "administrative.land_parcel",
        //       stylers: [{visibility: "off"}]},
        //     {
        //       featureType: "administrative.locality",
        //       elementType: "labels.text.fill",
        //       stylers: [{color: "#bdbdbd"}]},
        //     {
        //       featureType: "poi",
        //       elementType: "labels.text.fill",
        //       stylers: [{color: "#757575"}]},
        //     {
        //       featureType: "poi.park",
        //       elementType: "geometry",
        //       stylers: [{color: "#181818"}]},
        //     {
        //       featureType: "poi.park",
        //       elementType: "labels.text.fill",
        //       stylers: [{color: "#616161"}]},
        //     {
        //       featureType: "poi.park",
        //       elementType: "labels.text.stroke",
        //       stylers: [{color: "#1b1b1b"}]},
        //     {
        //       featureType: "road",
        //       elementType: "geometry.fill",
        //       stylers: [{color: "#2c2c2c"}]},
        //     {
        //       featureType: "road",
        //       elementType: "labels.text.fill",
        //       stylers: [{color: "#8a8a8a"}]},
        //     {
        //       featureType: "road.arterial",
        //       elementType: "geometry",
        //       stylers: [{color: "#373737"}]},
        //     {
        //       featureType: "road.highway",
        //       elementType: "geometry",
        //       stylers: [{color: "#3c3c3c"}]},
        //     {
        //       featureType: "road.highway.controlled_access",
        //       elementType: "geometry",
        //       stylers: [{color: "#4e4e4e"}]},
        //     {
        //       featureType: "road.local",
        //       elementType: "labels.text.fill",
        //       stylers: [{color: "#616161"}]},
        //     {
        //       featureType: "transit",
        //       elementType: "labels.text.fill",
        //       stylers: [{color: "#757575"}]},
        //     {
        //       featureType: "water",
        //       elementType: "geometry",
        //       stylers: [{color: "#000000"}]},
        //     {
        //       featureType: "water",
        //       elementType: "labels.text.fill",
        //       stylers: [{color: "#3d3d3d"}]}
        //     }]
        });

      var markerCluster = new MarkerClusterer(map, markers, {
        imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'
      });

      function placeMarker( loc ) {
        var latLng = new google.maps.LatLng( loc['geometry']['coordinates'][1], loc['geometry']['coordinates'][0]);
        var marker = new google.maps.Marker({
          position : latLng,
          map      : map
        });
        markerCluster.addMarker(marker);
        google.maps.event.addListener(marker, 'click', function(){
            infowindow.close();
            infowindow.setContent("<div class='infowindow_body' style='box-sizing: border-box; color: black;'>" +
                                  "<p><a style='text-decoration:none; color: black;' href='https://www.reddit.com/r/earthporn/" + loc['id'] + "'><div style='text-align: center; font-weight: bold; font-size: 16px;'>"  +
                                  loc['properties']['title'] + "</p></div></a> <div style='float:center'><img src='" + loc['properties']['image_link'] + "' style='max-width: 250px;'></div>" +
                                  "<div style='margin-top: 8px;'><p><a style='text-decoration:none; color: black; position: relative;' target='_blank' href='https://www.reddit.com/r/earthporn'> r/EarthPorn </a>" +
                                  "<a style='text-decoration:none; color: black; float: right;' target='_blank' href='https://www.reddit.com/u/" + loc['properties']['username'] + "'>" + loc['properties']['username'] + "</a></p></div>" +
                                  "<div style='margin-top: -10px;'><p><a style='text-decoration:none; color: black;' target='_blank' id='postScore' href='https://www.reddit.com/r/earthporn/" + loc['id'] + "'>" +
                                  loc['properties']['score'] + " points" + "</a><a style='text-decoration:none; color: black; float: right;' target='_blank' href='https://www.reddit.com/r/earthporn/" + loc['id'] + "'>" + loc['properties']['comments'] + " comments" + "</a></p></div></div>" +
                                  "<div style='margin-top: -10px; '><p><a data-toggle='modal' data-target='#reportModal' style='text-decoration: underline; color: black; float: left;' target='_blank'> Report </a><a data-toggle='modal' data-target='#exampleModal' onclick='locationSelected(), getPieChart(), getWikiExtract(), getRedditUser()'' style='text-decoration: underline; color: black; float: right;' target='_blank'> More </a></p></div>"
                                );

            infowindow.setOptions({maxWidth:250});
            infowindow.open(map, marker);
        });
        return marker
      }

      for(var i=0; i<geojson["features"].length; i++) {
        var markers = placeMarker(geojson["features"][i]);
      }
    }

    </script>
    <script src="{{url_for('static', filename='script11.js')}}"></script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDEGs3X-21iOsLaAYvFqs5fS4bP7pHNe6w&callback=initMap">
    </script>
    <!-- <div>
        <div id="map"></div>
    </div> -->
</body>
</html>
